import{c as K,o as B,s as x,r as y,u as U,a as $,t as G,j as e,C as V,b as A,d as z,e as R,f as F,F as Q,g as c,h as d,i as m,k as u,I as f,l as h,L as J,S as X,m as Y,n as ee,p as se,q as g,v as M,X as Z,B as E,w as ae,x as _,Z as re,R as ne,y as oe,U as te,z as ie,A as le,M as ce,D as de,E as I,G as W,H as me,J as xe,K as ue}from"./index-v68zVK4x.js";import{v as H,m as T,f as he,a as je}from"./masks-CvKA0i45.js";import{E as q}from"./external-link-DOq83d_o.js";import{K as pe}from"./key-Bs7UYyXA.js";import{C as ge}from"./chevron-left-DW1m7-Qk.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=K("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=K("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),be=B({companyName:x().min(1,"Razão social é obrigatória").min(3,"Razão social deve ter pelo menos 3 caracteres"),fantasyName:x().min(1,"Nome fantasia é obrigatório").min(3,"Nome fantasia deve ter pelo menos 3 caracteres"),cnpj:x().min(1,"CNPJ é obrigatório").refine(o=>H.cnpj(o),"CNPJ inválido"),segment:x().min(1,"Segmento é obrigatório"),email:x().email("Email inválido").min(1,"Email é obrigatório"),phone:x().min(1,"Telefone é obrigatório"),zipCode:x().min(1,"CEP é obrigatório").refine(o=>H.cep(o),"CEP inválido"),address:x().min(1,"Endereço é obrigatório"),number:x().min(1,"Número é obrigatório"),neighborhood:x().min(1,"Bairro é obrigatório"),city:x().min(1,"Cidade é obrigatória"),state:x().min(1,"Estado é obrigatório"),subdomain:x().min(1,"Subdomínio é obrigatório").refine(o=>H.subdomain(o),"Subdomínio inválido")});function ve({onNext:o,initialData:N}){const[j,v]=y.useState(!1),[l,C]=y.useState(null),[b,S]=y.useState(!1),[P,p]=y.useState(!1),{toast:k}=U(),n=$({resolver:G(be),defaultValues:{companyName:"",fantasyName:"",cnpj:"",segment:"",email:"",phone:"",zipCode:"",address:"",number:"",neighborhood:"",city:"",state:"",subdomain:"",...N}}),L=async a=>{if(a.replace(/\D/g,"").length===14){S(!0);try{const s=await he(a);s&&(n.setValue("companyName",s.companyName),n.setValue("fantasyName",s.fantasyName||s.companyName),n.setValue("email",s.email),n.setValue("phone",s.phone),n.setValue("zipCode",s.zipCode),n.setValue("address",s.address),n.setValue("neighborhood",s.neighborhood),n.setValue("city",s.city),n.setValue("state",s.state),n.setValue("number",s.number),k({title:"Dados encontrados!",description:"As informações da empresa foram preenchidas automaticamente."}))}catch(s){console.error("Erro ao buscar CNPJ:",s)}finally{S(!1)}}},D=async a=>{if(a.replace(/\D/g,"").length===8){p(!0);try{const s=await je(a);s&&(n.setValue("zipCode",s.zipCode),n.setValue("address",s.address),n.setValue("neighborhood",s.neighborhood),n.setValue("city",s.city),n.setValue("state",s.state),k({title:"CEP encontrado!",description:"O endereço foi preenchido automaticamente."}))}catch(s){console.error("Erro ao buscar CEP:",s)}finally{p(!1)}}},i=async a=>{if(!a||a.length<3){C(null);return}v(!0),setTimeout(()=>{const r=Math.random()>.3;C(r?"available":"taken"),v(!1),r?n.clearErrors("subdomain"):n.setError("subdomain",{type:"manual",message:"Este subdomínio já está em uso"})},1e3)},t=a=>{if(l!=="available"){k({title:"Erro",description:"Por favor, escolha um subdomínio disponível",variant:"destructive"});return}o(a)};return e.jsxs(V,{className:"w-full max-w-2xl mx-auto shadow-medium",children:[e.jsxs(A,{className:"text-center bg-gradient-primary text-primary-foreground rounded-t-lg",children:[e.jsx(z,{className:"text-2xl",children:"Informações da Empresa"}),e.jsx(R,{className:"text-primary-foreground/80",children:"Cadastre os dados básicos da sua empresa"})]}),e.jsx(F,{className:"p-6",children:e.jsx(Q,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(t),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{control:n.control,name:"companyName",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Razão Social *"}),e.jsx(u,{children:e.jsx(f,{placeholder:"Ex: Burger Express LTDA",...a})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"fantasyName",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Nome Fantasia *"}),e.jsx(u,{children:e.jsx(f,{placeholder:"Ex: Burger Express",...a})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"cnpj",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"CNPJ *"}),e.jsx(u,{children:e.jsxs("div",{className:"relative",children:[e.jsx(f,{placeholder:"00.000.000/0000-00",...a,onChange:r=>{const s=T.cnpj(r.target.value);a.onChange(s),s.replace(/\D/g,"").length===14&&L(s)}}),b&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(J,{className:"w-4 h-4 animate-spin text-muted-foreground"})})]})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"segment",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Segmento *"}),e.jsxs(X,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(u,{children:e.jsx(Y,{children:e.jsx(ee,{placeholder:"Selecione o segmento"})})}),e.jsxs(se,{children:[e.jsx(g,{value:"18",children:"Açaiteria"}),e.jsx(g,{value:"15",children:"Celulares"}),e.jsx(g,{value:"23",children:"Churrascaria"}),e.jsx(g,{value:"7",children:"Comércio em Geral"}),e.jsx(g,{value:"1",children:"Delivery"}),e.jsx(g,{value:"20",children:"Depósito Construção"}),e.jsx(g,{value:"24",children:"Dog Queen"}),e.jsx(g,{value:"8",children:"Eletrônicos"}),e.jsx(g,{value:"9",children:"Fit"}),e.jsx(g,{value:"25",children:"Hamburgueria"}),e.jsx(g,{value:"10",children:"Hamburgueria Premium"}),e.jsx(g,{value:"21",children:"Moto peças"}),e.jsx(g,{value:"11",children:"Pet Shop"}),e.jsx(g,{value:"12",children:"Pit stop"}),e.jsx(g,{value:"17",children:"Pizzaria"}),e.jsx(g,{value:"22",children:"Restaurante"}),e.jsx(g,{value:"16",children:"Sex Shop"}),e.jsx(g,{value:"19",children:"Sorvetes"}),e.jsx(g,{value:"13",children:"Supermercado"})]})]}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"email",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Email *"}),e.jsx(u,{children:e.jsx(f,{type:"email",placeholder:"contato@burgerexpress.com",...a})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"phone",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Telefone *"}),e.jsx(u,{children:e.jsx(f,{placeholder:"(11) 99999-9999",...a,onChange:r=>{const s=T.phone(r.target.value);a.onChange(s)}})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"zipCode",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"CEP *"}),e.jsx(u,{children:e.jsxs("div",{className:"relative",children:[e.jsx(f,{placeholder:"00000-000",...a,onChange:r=>{const s=T.cep(r.target.value);a.onChange(s),s.replace(/\D/g,"").length===8&&D(s)}}),P&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(J,{className:"w-4 h-4 animate-spin text-muted-foreground"})})]})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"address",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Endereço *"}),e.jsx(u,{children:e.jsx(f,{placeholder:"Rua das Flores",...a})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"number",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Número *"}),e.jsx(u,{children:e.jsx(f,{placeholder:"123",...a})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"neighborhood",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Bairro *"}),e.jsx(u,{children:e.jsx(f,{placeholder:"Centro",...a})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"city",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Cidade *"}),e.jsx(u,{children:e.jsx(f,{placeholder:"São Paulo",...a})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"state",render:({field:a})=>e.jsxs(d,{children:[e.jsx(m,{children:"Estado *"}),e.jsx(u,{children:e.jsx(f,{placeholder:"SP",...a})}),e.jsx(h,{})]})}),e.jsx(c,{control:n.control,name:"subdomain",render:({field:a})=>e.jsxs(d,{className:"md:col-span-2",children:[e.jsx(m,{children:"Subdomínio da Loja *"}),e.jsx(u,{children:e.jsxs("div",{className:"relative",children:[e.jsx(f,{placeholder:"burgerexpress",...a,onChange:r=>{const s=T.subdomain(r.target.value);a.onChange(s),i(s)},className:"pr-10"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:[j&&e.jsx(J,{className:"w-4 h-4 animate-spin text-muted-foreground"}),!j&&l==="available"&&e.jsx(M,{className:"w-4 h-4 text-success"}),!j&&l==="taken"&&e.jsx(Z,{className:"w-4 h-4 text-destructive"})]})]})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sua loja ficará disponível em: ",e.jsxs("span",{className:"font-medium text-primary",children:[a.value,".anafood.vip"]})]}),e.jsx(h,{})]})})]}),e.jsx(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90 transition-opacity",disabled:j||l!=="available",children:"Avançar"})]})})})]})}const ye=[{id:"monday",label:"Segunda-feira"},{id:"tuesday",label:"Terça-feira"},{id:"wednesday",label:"Quarta-feira"},{id:"thursday",label:"Quinta-feira"},{id:"friday",label:"Sexta-feira"},{id:"saturday",label:"Sábado"},{id:"sunday",label:"Domingo"}],Ce=B({logo:x().optional(),planId:x().min(1,"Selecione um plano"),password:x().min(6,"Senha deve ter pelo menos 6 caracteres"),confirmPassword:x(),workingDays:ae(x()).min(1,"Selecione pelo menos um dia de funcionamento"),openTime:x().min(1,"Horário de abertura é obrigatório"),closeTime:x().min(1,"Horário de fechamento é obrigatório")}).refine(o=>o.password===o.confirmPassword,{message:"Senhas não coincidem",path:["confirmPassword"]}).refine(o=>{const N=new Date(`1970-01-01T${o.openTime}:00`),j=new Date(`1970-01-01T${o.closeTime}:00`);return N<j},{message:"Horário de fechamento deve ser após o horário de abertura",path:["closeTime"]});function we({onNext:o,onBack:N,initialData:j}){const[v,l]=y.useState(null),[C,b]=y.useState([]),S=y.useRef(null),{toast:P}=U(),p=$({resolver:G(Ce),defaultValues:{logo:"",planId:"",password:"",confirmPassword:"",workingDays:[],openTime:"08:00",closeTime:"22:00",...j}});y.useEffect(()=>{k()},[]);const k=async()=>{const{data:i,error:t}=await _.from("plans").select("*").order("price",{ascending:!0});if(i&&!t){const a=i.map((r,s)=>({id:r.id,name:r.name,description:r.description||"",price:r.price,features:Array.isArray(r.features)?r.features.map(w=>String(w)):[],icon:s===0?e.jsx(re,{className:"w-5 h-5"}):s===1?e.jsx(Ne,{className:"w-5 h-5"}):e.jsx(fe,{className:"w-5 h-5"}),recommended:s===1}));b(a)}},n=i=>{var r;const t=(r=i.target.files)==null?void 0:r[0];if(!t)return;if(t.size>5*1024*1024){P({title:"Erro",description:"A imagem deve ter no máximo 5MB",variant:"destructive"});return}if(!t.type.startsWith("image/")){P({title:"Erro",description:"Por favor, selecione apenas arquivos de imagem",variant:"destructive"});return}const a=new FileReader;a.onload=s=>{var O;const w=(O=s.target)==null?void 0:O.result;l(w),p.setValue("logo",w)},a.readAsDataURL(t)},L=()=>{l(null),p.setValue("logo",""),S.current&&(S.current.value="")},D=i=>{o(i)};return e.jsxs(V,{className:"w-full max-w-3xl mx-auto shadow-medium",children:[e.jsxs(A,{className:"text-center bg-gradient-accent text-accent-foreground rounded-t-lg",children:[e.jsx(z,{className:"text-2xl",children:"Configuração da Loja"}),e.jsx(R,{className:"text-accent-foreground/80",children:"Escolha seu plano e configure o funcionamento da sua loja"})]}),e.jsx(F,{className:"p-6",children:e.jsx(Q,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(D),className:"space-y-6",children:[e.jsx(c,{control:p.control,name:"planId",render:({field:i})=>e.jsxs(d,{children:[e.jsx(m,{children:"Escolha seu Plano *"}),e.jsx(u,{children:e.jsx(ne,{onValueChange:i.onChange,value:i.value,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:C.map(t=>e.jsxs("label",{htmlFor:t.id,className:`relative cursor-pointer rounded-lg border-2 p-4 transition-all hover:shadow-md ${i.value===t.id?"border-primary bg-primary/5":"border-border"} ${t.recommended?"ring-2 ring-primary ring-offset-2":""}`,children:[t.recommended&&e.jsx("span",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:"Recomendado"}),e.jsx(oe,{value:t.id,id:t.id,className:"sr-only"}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.icon,e.jsx("h3",{className:"font-semibold",children:t.name})]}),i.value===t.id&&e.jsx(M,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-2xl font-bold mb-2",children:["R$ ",t.price.toFixed(2),e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/mês"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.description}),e.jsx("ul",{className:"space-y-1",children:t.features.slice(0,3).map((a,r)=>e.jsxs("li",{className:"text-xs flex items-start gap-1",children:[e.jsx(M,{className:"w-3 h-3 text-success mt-0.5 flex-shrink-0"}),e.jsx("span",{children:a})]},r))}),e.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:e.jsx("p",{className:"text-xs font-medium text-success",children:"✨ 7 dias grátis para testar!"})})]},t.id))})})}),e.jsx(h,{})]})}),e.jsx(c,{control:p.control,name:"logo",render:({field:i})=>e.jsxs(d,{children:[e.jsx(m,{children:"Logo da Empresa"}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[v?e.jsxs("div",{className:"relative w-32 h-32 mx-auto bg-muted rounded-lg overflow-hidden",children:[e.jsx("img",{src:v,alt:"Logo preview",className:"w-full h-full object-cover"}),e.jsx(E,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:L,children:e.jsx(Z,{className:"w-4 h-4"})})]}):e.jsx("div",{className:"w-32 h-32 mx-auto border-2 border-dashed border-muted-foreground/25 rounded-lg flex items-center justify-center cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{var t;return(t=S.current)==null?void 0:t.click()},children:e.jsxs("div",{className:"text-center",children:[e.jsx(te,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload Logo"})]})}),e.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:n,className:"hidden"}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Recomendado: 200x200px, máximo 5MB"})]})}),e.jsx(h,{})]})}),e.jsx(c,{control:p.control,name:"workingDays",render:()=>e.jsxs(d,{children:[e.jsx(m,{children:"Dias de Funcionamento *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ye.map(i=>e.jsx(c,{control:p.control,name:"workingDays",render:({field:t})=>{var a;return e.jsxs(d,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(u,{children:e.jsx(ie,{checked:(a=t.value)==null?void 0:a.includes(i.id),onCheckedChange:r=>{var s;return r?t.onChange([...t.value,i.id]):t.onChange((s=t.value)==null?void 0:s.filter(w=>w!==i.id))}})}),e.jsx(m,{className:"font-normal",children:i.label})]},i.id)}},i.id))}),e.jsx(h,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{control:p.control,name:"openTime",render:({field:i})=>e.jsxs(d,{children:[e.jsx(m,{children:"Horário de Abertura *"}),e.jsx(u,{children:e.jsx(f,{type:"time",...i})}),e.jsx(h,{})]})}),e.jsx(c,{control:p.control,name:"closeTime",render:({field:i})=>e.jsxs(d,{children:[e.jsx(m,{children:"Horário de Fechamento *"}),e.jsx(u,{children:e.jsx(f,{type:"time",...i})}),e.jsx(h,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{control:p.control,name:"password",render:({field:i})=>e.jsxs(d,{children:[e.jsx(m,{children:"Senha de Acesso *"}),e.jsx(u,{children:e.jsx(f,{type:"password",placeholder:"••••••••",...i})}),e.jsx(h,{})]})}),e.jsx(c,{control:p.control,name:"confirmPassword",render:({field:i})=>e.jsxs(d,{children:[e.jsx(m,{children:"Confirmar Senha *"}),e.jsx(u,{children:e.jsx(f,{type:"password",placeholder:"••••••••",...i})}),e.jsx(h,{})]})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(E,{type:"button",variant:"outline",className:"flex-1",onClick:N,children:"Voltar"}),e.jsx(E,{type:"submit",className:"flex-1 bg-gradient-accent hover:opacity-90 transition-opacity",children:"Avançar"})]})]})})})]})}const Se=B({fullName:x().min(1,"Nome completo é obrigatório").min(3,"Nome deve ter pelo menos 3 caracteres"),email:x().email("Email inválido").min(1,"Email é obrigatório")});function ke({onNext:o,onBack:N,initialData:j,isLoading:v=!1}){const l=$({resolver:G(Se),defaultValues:{fullName:"",email:"",...j}}),C=b=>{o(b)};return e.jsxs(V,{className:"w-full max-w-2xl mx-auto shadow-medium",children:[e.jsxs(A,{className:"text-center bg-gradient-dark text-foreground rounded-t-lg",children:[e.jsx(z,{className:"text-2xl",children:"Informações do Administrador"}),e.jsx(R,{className:"text-foreground/80",children:"Configure os dados do administrador principal da loja"})]}),e.jsx(F,{className:"p-6",children:e.jsx(Q,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(C),className:"space-y-6",children:[e.jsx(c,{control:l.control,name:"fullName",render:({field:b})=>e.jsxs(d,{children:[e.jsx(m,{children:"Nome Completo *"}),e.jsx(u,{children:e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(f,{placeholder:"João da Silva",className:"pl-10",...b})]})}),e.jsx(h,{})]})}),e.jsx(c,{control:l.control,name:"email",render:({field:b})=>e.jsxs(d,{children:[e.jsx(m,{children:"Email de Acesso *"}),e.jsx(u,{children:e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(f,{type:"email",placeholder:"admin@minharloja.com",className:"pl-10",...b})]})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-accent"}),e.jsx("h4",{className:"font-semibold text-sm",children:"Informação de Segurança"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"A senha foi definida na etapa anterior e será usada para acessar o painel administrativo da sua loja."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(E,{type:"button",variant:"outline",className:"flex-1",onClick:N,disabled:v,children:"Voltar"}),e.jsx(E,{type:"submit",className:"flex-1 bg-gradient-primary hover:opacity-90 transition-opacity",disabled:v,children:v?"Criando empresa...":"Finalizar Cadastro"})]})]})})})]})}const Ee=({companyData:o,storeConfig:N,userInfo:j,onStartOver:v})=>{const l=`https://${o.subdomain}.anafood.vip`,C={monday:"Seg",tuesday:"Ter",wednesday:"Qua",thursday:"Qui",friday:"Sex",saturday:"Sáb",sunday:"Dom"};return e.jsxs(V,{className:"w-full max-w-2xl mx-auto shadow-strong",children:[e.jsxs(A,{className:"text-center bg-gradient-primary text-primary-foreground rounded-t-lg",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-success rounded-full flex items-center justify-center mb-4",children:e.jsx(I,{className:"w-8 h-8 text-success-foreground"})}),e.jsx(z,{className:"text-2xl",children:"Cadastro Concluído!"}),e.jsx(R,{className:"text-primary-foreground/80",children:"Sua loja foi criada com sucesso no AnaFood"})]}),e.jsxs(F,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-bg rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:o.fantasyName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.companyName})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"URL da Loja:"}),e.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1",children:[l,e.jsx(q,{className:"w-3 h-3"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"CNPJ:"}),e.jsx("p",{children:o.cnpj})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"Email:"}),e.jsx("p",{children:o.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"Telefone:"}),e.jsx("p",{children:o.phone})]})]})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(me,{className:"w-4 h-4 text-accent"}),e.jsx("h4",{className:"font-semibold",children:"Horário de Funcionamento"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Dias:"}),e.jsx("span",{children:N.workingDays.map(b=>C[b]).join(", ")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Horário:"}),e.jsxs("span",{children:[N.openTime," às ",N.closeTime]})]})]})]}),e.jsxs("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pe,{className:"w-4 h-4 text-warning"}),e.jsx("h4",{className:"font-semibold text-warning",children:"Informações de Acesso"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Guarde suas credenciais de acesso em local seguro. Você precisará delas para acessar o painel administrativo da sua loja."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Próximos Passos:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-success mt-0.5"}),e.jsx("span",{children:"Acesse sua loja e configure os produtos"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-success mt-0.5"}),e.jsx("span",{children:"Personalize o visual e as configurações"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-success mt-0.5"}),e.jsx("span",{children:"Comece a receber seus primeiros pedidos"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(E,{asChild:!0,className:"flex-1 bg-gradient-primary hover:opacity-90 transition-opacity",children:e.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:["Acessar Minha Loja",e.jsx(q,{className:"w-4 h-4 ml-2"})]})}),e.jsx(E,{variant:"outline",onClick:v,className:"flex-1",children:"Cadastrar Nova Empresa"})]})]})]})};function Ve(){const[o,N]=y.useState(1),[j,v]=y.useState(null),[l,C]=y.useState(null),[b,S]=y.useState(null),[P,p]=y.useState(!1);xe();const{toast:k}=U(),n=r=>{v(r),N(2)},L=r=>{C(r),N(3)},D=async r=>{if(S(r),p(!0),!j||!l){k({title:"Erro",description:"Dados incompletos. Por favor, complete todos os passos.",variant:"destructive"}),p(!1);return}try{const{data:s,error:w}=await _.functions.invoke("create-tenant",{body:{companyData:j,storeConfig:{...l,password:l.password},userInfo:r}});if(w||!(s!=null&&s.success))throw new Error((w==null?void 0:w.message)||(s==null?void 0:s.error)||"Erro ao criar empresa");k({title:"Empresa criada com sucesso!",description:"Sua loja foi configurada e está pronta para uso."}),N(4)}catch(s){console.error("Registration error:",s),k({title:"Erro ao criar empresa",description:s.message||"Ocorreu um erro ao processar o cadastro. Tente novamente.",variant:"destructive"})}finally{p(!1)}},i=()=>{N(o-1)},t=()=>{N(1),v(null),C(null),S(null)},a=[{number:1,title:"Dados da Empresa"},{number:2,title:"Configuração"},{number:3,title:"Administrador"},{number:4,title:"Concluído"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-card/50 backdrop-blur border-b border-border",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-primary rounded-lg flex items-center justify-center",children:e.jsx(W,{className:"w-5 h-5 text-primary-foreground"})}),e.jsx("h1",{className:"text-xl font-bold",children:"AnaFood"})]}),o<4&&e.jsx(ue,{to:"/login",children:e.jsxs(E,{variant:"ghost",size:"sm",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),"Já tenho uma conta"]})})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-12",children:[o<4&&e.jsx("div",{className:"max-w-3xl mx-auto mb-12",children:e.jsx("div",{className:"flex items-center justify-between",children:a.slice(0,3).map((r,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all ${o>=r.number?"bg-gradient-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:r.number}),e.jsx("span",{className:"text-xs mt-2 text-muted-foreground whitespace-nowrap",children:r.title})]}),s<2&&e.jsx("div",{className:`w-24 h-0.5 mx-2 transition-all ${o>r.number?"bg-primary":"bg-muted"}`})]},r.number))})}),o===1&&e.jsx(ve,{onNext:n,initialData:j||void 0}),o===2&&j&&e.jsx(we,{onNext:L,onBack:i,initialData:l||void 0}),o===3&&j&&l&&e.jsx(ke,{onNext:D,onBack:i,initialData:b||void 0,isLoading:P}),o===4&&j&&l&&b&&e.jsx(Ee,{companyData:j,storeConfig:l,userInfo:b,onStartOver:t})]})]})}export{Ve as default};
